{
    "componentChunkName": "component---src-components-blog-post-tsx",
    "path": "/validating-a-wordle/",
    "result": {"data":{"site":{"siteMetadata":{"title":"alexmj212.dev"}},"markdownRemark":{"id":"a8fbd5d8-1c2e-5695-8da6-35eee5e83f91","excerpt":"This post is part of a series I’m writing to analyze how Wordle works and to construct a clone. View the other parts here: Understanding How Wordle Works…","html":"<p>This post is part of a series I’m writing to analyze how Wordle works and to construct a clone. View the other parts here:</p>\n<ol>\n<li><a href=\"https://alexmj212.dev/blog/understanding-how-wordle-works/\">Understanding How Wordle Works</a></li>\n<li><a href=\"https://alexmj212.dev/blog/understanding-how-wordle-works/\">Building The Wordle Game Loop</a></li>\n</ol>\n<p>When a player submits a guess to Word Guess, the game performs some string manipulation to verify the word against the solution. Each letter of the guessed word is tracked separately in addition to the full word. This is to verify the hints that should be set or if the guess is correct entirely.</p>\n<p><img src=\"/blog/img/screenshot-2022-02-07-013532.png\" alt=\"Word Guess validation message example\" title=\"Word Guess validation message example\"></p>\n<h2>Representing Letter Hints</h2>\n<p>Much of this logic is dependent on the object structure I chose to represent the game state and how I’m tracking each letter in the guess grid. First, we start with the <code class=\"language-text\">LetterState</code>. Each letter within the guess map and the keyboard is presented as this object.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">LetterState</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  letter<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  containMatch<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n  positionMatch<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n  noMatch<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Each letter has several properties that are used to track and display hints. Each of the hint types is represented here as a property with the <code class=\"language-text\">boolean</code> type. For example, when a letter is verified to be within the word but in the wrong position, I set the <code class=\"language-text\">containMatch</code> to <code class=\"language-text\">true</code>. If a letter is a position match, the <code class=\"language-text\">containMatch</code> and the <code class=\"language-text\">positionMatch</code> will be set to true; a letter in the correct position always means that the letter is contained in the solution as well. However, this slightly differs for each representation of the hints for the player.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>guessMap<span class=\"token punctuation\">,</span> setGuessMap<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>LetterState<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>letterOptions<span class=\"token punctuation\">,</span> setLetterOptions<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>LetterState<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>I have two separate React states that represent each component of the game. The <code class=\"language-text\">guessMap</code> is a two-dimensional array of <code class=\"language-text\">LetterState</code>. The first dimension represents the row of the guess, and the second dimension represents each letter of the guess.</p>\n<p>The <code class=\"language-text\">letterOptions</code> is a single-dimension array of <code class=\"language-text\">LetterState</code>. This tracks the keyboard display which allows displays the highest value hint to the player. More on hint value below.</p>\n<p>I can construct the guessed word by taking the <code class=\"language-text\">guessMap</code> in combination with the <code class=\"language-text\">mapPointer</code> and map the <code class=\"language-text\">LetterState</code> to a flat array of strings and then join them.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> guessedWord <span class=\"token operator\">=</span> guessMap<span class=\"token punctuation\">[</span>mapPointer<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>letter<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> letter<span class=\"token punctuation\">.</span>letter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Step 1: Take the current guess row and map each letter to a flat array</span>\n<span class=\"token comment\">//    [{ letter: \"G\", ...}, { letter: \"U\", ...}, ... ] => [\"G\", \"U\", \"E\", \"S\", \"S]</span>\n<span class=\"token comment\">// Step 2: Join all the letters to form a single string:</span>\n<span class=\"token comment\">//    [\"G\", \"U\", \"E\", \"S\", \"S] => \"GUESS\"</span></code></pre></div>\n<h3>Ranking the Value of Hints</h3>\n<p>Hints are displayed in two ways. First, hints are displayed in the guess map representing the accuracy of each letter from the guess. Second, hints are shown on the keyboard as the highest value hint for that unique letter. The hints for the guess map and the keyboard are tracked separately to provide a variety of information that helps the player make more informed guessed.</p>\n<p>The value of each hint is the usefulness of that hint to the player working towards the solution. Below is all possible hint states ordered from lowest value to highest value and their <code class=\"language-text\">LetterState</code> representation.</p>\n<p><strong>Unselected</strong> - the letter hasn’t been used in a guess.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> unselectedLetter<span class=\"token operator\">:</span> LetterState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  letter<span class=\"token operator\">:</span> <span class=\"token string\">\"A\"</span><span class=\"token punctuation\">;</span>\n  containMatch<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  positionMatch<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  noMatch<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>No Match</strong> - the letter isn’t in the solution word.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> noMatchLetter<span class=\"token operator\">:</span> LetterState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  letter<span class=\"token operator\">:</span> <span class=\"token string\">\"A\"</span><span class=\"token punctuation\">;</span>\n  containMatch<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  positionMatch<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  noMatch<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>Contains Match</strong> - the letter is contained in the solution.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> containMatchLetter<span class=\"token operator\">:</span> LetterState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  letter<span class=\"token operator\">:</span> <span class=\"token string\">\"A\"</span><span class=\"token punctuation\">;</span>\n  containMatch<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  positionMatch<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  noMatch<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>Position Match</strong> - the letter is a position match to the solution.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> positionMatchLetter<span class=\"token operator\">:</span> LetterState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  letter<span class=\"token operator\">:</span> <span class=\"token string\">\"A\"</span><span class=\"token punctuation\">;</span>\n  containMatch<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  positionMatch<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  noMatch<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>The position match is the most valuable hint because it is a direct reveal to the solution. Without the position match, the contain match doesn’t immediately eliminate the uncertainty of that letter’s position. No match is a hint from the opposite direction, avoid this letter entirely in future guesses because it is not part of the solution. Unselected represents the remaining pool from which you can construct guesses, they may or may not be in the solution.</p>\n<h2>Validate A Guess</h2>\n<p>Once the player has entered five letters, I perform checks to verify the accuracy of their guess. The first check is simply a validation against an approved word list. In previous posts, I mentioned that Wordle actually has two word lists from which it validates guesses, a list of all valid 5-letter words, and list of words to use as puzzles. As part of the validation, I check that the guess word exists in either of the lists before proceeding. I provide to the player that the word they attempted to submit is not a valid guess. This mostly filters out junk guesses like “AAAAA” or “ABCDE”.</p>\n<p>The second validation I perform is a check to prevent duplicate words. The player can actually hurt their chances of finding the solution if they waste an attempt guessing the same word again. I provide a warning and stop validation if the word is already guessed.</p>\n<p>Those validations look like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>guessWords<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>guessedWord<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> validWords<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>guessedWord<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Ensure the word is contained within all the possible words</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>previousGuesses<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>guessedWord<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Check if word has already been tried</span>\n    toast<span class=\"token punctuation\">.</span><span class=\"token function\">warn</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You already tried </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>guessedWord<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Valid guess, proceed to generate hints</span>\n    <span class=\"token function\">validateWord</span><span class=\"token punctuation\">(</span>guessedWord<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Not a valid word</span>\n  toast<span class=\"token punctuation\">.</span><span class=\"token function\">warn</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>guessedWord<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> is not a word!</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>If the guessed word passes these checks, then I begin compiling the hints for each letter.</p>\n<p>For each letter in the guess, I perform a serious of checks to set the <code class=\"language-text\">containMatch</code>, <code class=\"language-text\">positionMatch</code>, or <code class=\"language-text\">noMatch</code> appropriately. As mentioned above, we must track the hints for each letter in the guess map and the keyboard separately. First, I grab the current state of the letter we’re verifying from each.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// Loop over array of letter from the guessed word</span>\nguess<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>letter<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Search method for finding keyboard letter to be updated</span>\n  <span class=\"token keyword\">const</span> keyboardLetter <span class=\"token operator\">=</span> letterOptions<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>letterOption<span class=\"token operator\">:</span> LetterState<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> letterOption<span class=\"token punctuation\">.</span>letter <span class=\"token operator\">===</span> letter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> guessMapLetter <span class=\"token operator\">=</span> guessMap<span class=\"token punctuation\">[</span>mapPointer<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Then, after retrieving the current states, I check if this letter is contained within the solution at all and set the <code class=\"language-text\">containMatch</code> to <code class=\"language-text\">true</code>. If the letter isn’t contained in the solution at all, I set the <code class=\"language-text\">noMatch</code> to <code class=\"language-text\">true</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\">guess<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>letter<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token comment\">// Check if letter is contained in goal word</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>solution<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>letter<span class=\"token punctuation\">)</span> <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    guessMapLetter<span class=\"token punctuation\">.</span>noMatch <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    guessMapLetter<span class=\"token punctuation\">.</span>containMatch <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    keyboardLetter<span class=\"token punctuation\">.</span>containMatch <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token operator\">...</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Gray out letter from keyboard if no match is found for the letter</span>\n    guessMapLetter<span class=\"token punctuation\">.</span>noMatch <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    keyboardLetter<span class=\"token punctuation\">.</span>noMatch <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>If the letter is contained in the word, I must then check if it’s in the correct position. I split the solution word into each individual letter and check if the current letter’s index matches the solution letter’s index. If there is a match, I set <code class=\"language-text\">positionMatch</code> to <code class=\"language-text\">true</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"> guess<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>letter<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token comment\">// Check if letter is contained in goal word</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>solution<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>letter<span class=\"token punctuation\">)</span> <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>\n    <span class=\"token comment\">// Check if letter matches the position</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>solution<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> letter<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      guessMapLetter<span class=\"token punctuation\">.</span>positionMatch <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      keyboardLetter<span class=\"token punctuation\">.</span>positionMatch <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>And that’s it for validation! This logic works great for the first guess from a fresh game. However, an issue comes up if I submit a second guess.</p>\n<h2>Duplicate Letters and Hint Accuracy</h2>\n<p>How can you handle a letter hint that should display an increased value? For example, if the letter “A” was contain matched in the first guess, but positioned matched in the second guess, how do you display that to the player? Conversely, what if the first guess had the letter “A” positioned matched but the second guess was only a contain match? Additionally, we must also track the occurences of each letter to ensure we’re not showing more of less hints per the number of duplicate letters.</p>\n<p>In this example, you can see the “D” in the first guess shows a contain match. Then in the second guess, the “D” is used twice. However, the hints accurately display that the first D doesn’t show a contain match because the second one is a position match. We need to handle these hint situations accurately, otherwise the player may be misled in the occurences of specific letters.</p>\n<p><img src=\"/blog/img/screenshot-2022-02-07-012424.png\" alt=\"Word Guess hints for multiple letters example\" title=\"Word Guess hints for multiple letters example\"></p>\n<p>I need to ensure that a letter in the guessed word is accurately accounting for the contain match, position match, and the number of occurrences of each letter. This is important in the guess map but not important for the keyboard. The keyboard always displays the highest value hint achieved by the player. It doesn’t need to track duplicate letters or the position of the letter.</p>\n<p>First, I want to count the number of duplicate letters in the guessed word and the solution. Then I can compare them to see if I need to perform additional checks. I chose to use a regular expression for counting the number of matching letters. I defined a simple regular expression for the current letter I’m examining. I then used that regular expression match against the guessed word and the solution.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// regex for finding occurrences of the current letter</span>\n<span class=\"token keyword\">const</span> dupeLetterMatch <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span>letter<span class=\"token punctuation\">,</span> <span class=\"token string\">\"g\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// count occurrences of letter in guess word, 0 if none</span>\n<span class=\"token keyword\">const</span> guessOccurenceCount <span class=\"token operator\">=</span> guess<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>dupeLetterMatch<span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span>length <span class=\"token operator\">??</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// count occurrences of letter in goal word, 0 if none</span>\n<span class=\"token keyword\">const</span> solutionOccurenceCount <span class=\"token operator\">=</span> solution<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>dupeLetterMatch<span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span>length <span class=\"token operator\">??</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Then, if the user guessed multiple identical letters, but the solution contains less duplicates, the hint should accurately reflect that for each letter’s hint in the guessed word. To reflect this hint accurately, I set the <code class=\"language-text\">containMatch</code> to <code class=\"language-text\">false</code>. I only perform this however, if this not the first occurence of this letter in the guess word.</p>\n<p>Effectively, I am retroactively turning off hints in the guess map for multiples of the same letter to ensure the hints are counted accurately in addition to being displayed accurately.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// If the guess contains more occurrences than the goal and it's not the first time the letter was guessed, remove hint</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>guessOccurenceCount <span class=\"token operator\">></span> goalOccurenceCount <span class=\"token operator\">&amp;&amp;</span> guess<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>letter<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> index<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  guessMap<span class=\"token punctuation\">[</span>mapPointer<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n    <span class=\"token comment\">// retrieve previous duplicate letters that come before this index</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>guessLetter<span class=\"token punctuation\">,</span> filterIndex<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> letter <span class=\"token operator\">===</span> guessLetter<span class=\"token punctuation\">.</span>letter <span class=\"token operator\">&amp;&amp;</span> <span class=\"token generic-function\"><span class=\"token function\">filterIndex</span> <span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span> index<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// disable their hint</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>guessLetter<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span></span></span> <span class=\"token punctuation\">(</span>guessLetter<span class=\"token punctuation\">.</span>containMatch <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Then, I want to ensure that if the position matches on a duplicate letter that I don’t show hints on the other duplicates. Especially if the solution only contains one copy of the letter.</p>\n<p>I use the <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some\"><code class=\"language-text\">some</code></a> method here which returns true if some of the values match the condition I provide. The condition I’m looking for is if the letter is in the guess and if the letter’s <code class=\"language-text\">positionMatch</code> is <code class=\"language-text\">true</code>. I set the <code class=\"language-text\">containMatch</code> to <code class=\"language-text\">false</code>. This ensures that a contain match is removed if the player found the position match later on.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// If the guess already has a position match, hide hints for duplicate letter after</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>guessMap<span class=\"token punctuation\">[</span>mapPointer<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">some</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>guessLetter<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> letter <span class=\"token operator\">===</span> guessLetter<span class=\"token punctuation\">.</span>letter <span class=\"token operator\">&amp;&amp;</span> guessLetter<span class=\"token punctuation\">.</span>positionMatch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  guessMapLetter<span class=\"token punctuation\">.</span>containMatch <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>That completes all the validation and hint display. We are now accurately displaying hints for the <code class=\"language-text\">containMatch</code>, <code class=\"language-text\">positionMatch</code>, and <code class=\"language-text\">noMatch</code> states while also taking multiple identical letters into account.</p>\n<h2>Showing the Player Their Hints</h2>\n<p>With the hint states fully constructed, we can now display them to the player.</p>\n<p>Up until this point, we haven’t just done a simple check to see if the guessed word matches the solution. We could check this before we perform any validation. Why don’t we skip the checks if the player’s guess was correct?</p>\n<p>I still want to show the fully position matched guess to the user. The checks are necessary for that positive feedback to tell the player they made an accurate guess. Additionally, Wordle generates an emoji grid for the player to share, if the last line of the emoji grid does not contain 5 green squares, it’s clear if the player finished the puzzle.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// Success</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>guess <span class=\"token operator\">===</span> solution<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">setShowSuccess</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">clearError</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>If the player didn’t manage to guess the word correctly and they still have guesses available, we just move them to the next line and continue playing.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// No success, next line</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>mapPointer<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;</span> guessMap<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">setMapPointer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>mapPointer<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">clearError</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>And if the player is out of guesses, we end the game and reveal the word.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// Out of guesses</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>mapPointer<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> guessMap<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">setShowFail</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">clearError</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Last but not least, I set the keyboard and guess map to the updated values to show the player an accurate game state.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// Update keyboard</span>\n<span class=\"token function\">setLetterOptions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>letterOptions<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Update guess map</span>\n<span class=\"token function\">setGuessMap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>guessMap<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>In the next part, I will go over additional features I added to my version of the game that aren’t present in the original version of Wordle.</p>","frontmatter":{"title":"Validating A Wordle","date":"February 07, 2022","description":"Creating a Wordle Clone, Part 3"}},"previous":{"fields":{"slug":"/building-the-game-loop/"},"frontmatter":{"title":"Building The Wordle Game Loop","date":"January 23, 2022"}},"next":null},"pageContext":{"id":"a8fbd5d8-1c2e-5695-8da6-35eee5e83f91","previousPostId":"645c24b1-6b7d-54ab-ae2a-ce9854370432","nextPostId":null}},
    "staticQueryHashes": ["2841359383","3257411868"]}